<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="
			default-src 'self' data: https://ssl.gstatic.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://fonts.googleapis.com 'unsafe-eval' 'unsafe-inline';
			connect-src 'self' https://meowfacts.herokuapp.com https://*;
			style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com;
			img-src 'self' data: https://* http://* blob:;
			media-src *;
			script-src 'self' 'unsafe-inline' 'unsafe-eval' https://code.jquery.com;
		">
		<meta name="format-detection" content="telephone=no">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
		<title>Materialize 2025</title>

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
		<link rel="stylesheet" href="materialize-v2.2.2/css/materialize.min.css" />
		<link rel="stylesheet" href="css/index.css" media="screen,projection" />

		<style>
			.error-panel {
				padding: 15px;
				background-color: #ffebee;
				border: 1px solid #c62828;
				color: #c62828;
				margin-top: 20px;
				border-radius: 4px;
			}
			.loading-panel {
				text-align: center;
				padding: 20px;
			}
			.cat-fact-card {
				border-radius: 12px;
				background: linear-gradient(135deg, #fff3e0 0%, #fff8e1 100%);
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}
			.cat-fact-card:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
				transition: all 0.3s ease;
			}
			.cat-fact-text {
				font-size: 16px;
				line-height: 1.6;
				color: #424242;
				font-style: italic;
			}
			.share-btn {
				margin-left: 8px;
			}
			.share-btn:hover {
				background-color: #ff9800 !important;
			}
		</style>
	</head>
	<body>

		<!-- NAVEGACI√ìN -->
		<nav class="nav navbar nav-extended">
			<div class="nav-wrapper">
				<a href="#" class="brand-logo">Hola Chiki</a>
				<a href="#" data-target="slide-out" class="sidenav-trigger">
					<i class="material-icons">menu</i>
				</a>
				<ul id="nav-mobile" class="right hide-on-med-and-down">
					<li><a href="sass.html">Sass</a></li>
					<li><a href="badges.html">Components</a></li>
					<li><a href="collapsible.html">JavaScript</a></li>
				</ul>
			</div>
			<ul class="tabs tabs-fixed-width tab-demo tabs-horizontal z-depth-1">
				<li class="tab">
					<a href="#image-test1">
						<span class="tab-svg-icon">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" viewBox="0 -960 960 960" fill="#e3e3e3">
								<path d="m720-600-32 28q-14 13-33 13t-33-11q-14-11-19-28t1-36l16-50-34-20q-16-9-22.5-26t-1.5-34q5-17 20-26.5t34-9.5h40l12-38q6-19 20.5-30.5T720-880q17 0 31.5 11.5T772-838l12 38h40q19 0 33.5 9.5T878-764q7 18 0 35t-22 25l-36 20 16 50q6 19 1 36.5T818-570q-15 11-33.5 11T752-572l-32-28Zm0-80q17 0 28.5-11.5T760-720q0-17-11.5-28.5T720-760q-17 0-28.5 11.5T680-720q0 17 11.5 28.5T720-680ZM552-244q23 60-15 112T430-80q-33 0-62.5-17T324-142q-83 12-137.5-42.5T142-324q-30-17-46-46.5T80-438q0-61 55.5-98.5T244-552l62 26q20-31 53-50.5t71-21.5v-82h60v90q37 11 61 34.5t41 65.5h88v60h-82q-2 38-20.5 71T528-306l24 62Zm-248 24q0-27 4.5-52.5T322-322q-23 11-49.5 15.5T220-304q0 39 22.5 61.5T304-220Zm-74-164q32 0 56.5-8t63.5-32l-120-50q-29-12-49.5.5T160-434q0 26 17 38t53 12Zm200 224q25 0 40.5-17.5T478-214l-54-136q-19 32-29.5 64T384-228q0 33 11.5 50.5T430-160Zm66-222q10-10 16-26.5t6-34.5q0-32-21-54t-52-22q-18 0-34 6t-27 17l78 36 34 78Zm-174 60Z" />
							</svg>
						</span>
					</a>
				</li>
				<li class="tab">
					<a href="#image-test3">
						<span class="tab-svg-icon">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" viewBox="0 -960 960 960" fill="#e3e3e3">
								<path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-75 29-147t81-128.5q52-56.5 125-91T475-881q21 0 43 2t45 7q-9 45 6 85t45 66.5q30 26.5 71.5 36.5t85.5-5q-26 59 7.5 113t99.5 56q1 11 1.5 20.5t.5 20.5q0 82-31.5 154.5t-85.5 127q-54 54.5-127 86T480-80Zm-60-480q25 0 42.5-17.5T480-620q0-25-17.5-42.5T420-680q-25 0-42.5 17.5T360-620q0 25 17.5 42.5T420-560Zm-80 200q25 0 42.5-17.5T400-420q0-25-17.5-42.5T340-480q-25 0-42.5 17.5T280-420q0 25 17.5 42.5T340-360Zm260 40q17 0 28.5-11.5T640-360q0-17-11.5-28.5T600-400q-17 0-28.5 11.5T560-360q0 17 11.5 28.5T600-320ZM480-160q122 0 216.5-84T800-458q-50-22-78.5-60T683-603q-77-11-132-66t-68-132q-80-2-140.5 29t-101 79.5Q201-644 180.5-587T160-480q0 133 93.5 226.5T480-160Zm0-324Z" />
							</svg>
						</span>
					</a>
				</li>
				<li class="tab">
					<a href="#cat-facts">
						<span class="tab-svg-icon">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M240-400q0 52 21 98.5t60 81.5q-1-5-1-10v-10q0-32 12-60.5t35-51.5l44-44q20-20 31-40.5t11-42.5q0-33-23.5-56.5T360-640q-33 0-56.5 23.5T280-560q0 33 23.5 56.5T360-480h80q17 0 28.5 11.5T480-440q0 17-11.5 28.5T440-400H240Zm480 0q0 52 21 98.5t60 81.5q-1-5-1-10v-10q0-32 12-60.5t35-51.5l44-44q20-20 31-40.5t11-42.5q0-33-23.5-56.5T840-640q-33 0-56.5 23.5T760-560q0 33 23.5 56.5T840-480h80q17 0 28.5 11.5T960-440q0 17-11.5 28.5T920-400H720ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
							</svg>
						</span>
					</a>
				</li>
				<li class="tab">
					<a href="#image-test4">
						<span class="tab-svg-icon">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M80-120v-80q38 0 68-14.5t65-40.5q30 25 65.5 39.5T347-201q33 0 69-14t65-40q32 28 66 41t68 13q33 0 64.5-13t69.5-41q39 30 69 42.5t62 12.5v80q-35 0-67.5-9.5T749-157q-32 20-66.5 28.5T615-120q-33 0-67.5-8.5T481-157q-29 19-64 28t-70 9q-34 0-68-9t-66-28q-31 18-64.5 27.5T80-120Zm0-180v-80q0-97 37.5-181T220-707q65-62 152.5-97.5T560-840q33 0 65.5 3.5T684-827q-21 32-32.5 67.5T640-693q0 55 39 94t94 39h107v80H773q-89 0-151-62t-62-151q0-14 2-29.5t6-30.5q-74 18-121 76.5T400-540q0 36 11.5 68.5T444-410q8-5 17-11.5t19-13.5q29 26 67 40t68 14q30 0 67-14.5t67-39.5q32 24 63.5 39.5T880-380v80q-35 0-67.5-9.5T749-337q-32 20-65 28.5t-69 8.5q-36 0-72-10t-62-27q-31 19-65 27.5t-69 9.5q-35 1-69-9t-65-28q-31 18-64.5 27.5T80-300Zm265-81h10q5 0 10-1-22-35-33.5-75T320-540q0-81 37-146.5T460-794v44q-62 16-114.5 48.5t-92 78.5Q214-577 190-520.5T161-400q15-9 26-16t26-19q37 27 67 40.5t65 13.5Zm-75-168Z" />
							</svg>
						</span>
					</a>
				</li>
				<li class="tab">
					<a href="#image-test6">
						<span class="tab-svg-icon">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M480-80 120-436l200-244h320l200 244L480-80ZM183-680l-85-85 57-56 85 85-57 56Zm257-80v-120h80v120h-80Zm335 80-57-57 85-85 57 57-85 85ZM480-192l210-208H270l210 208ZM358-600l-99 120h442l-99-120H358Z" />
							</svg>
						</span>
					</a>
				</li>
			</ul>
		</nav>

		<!-- Contenido de cada tab -->
		<div id="image-test1" class="tab-content">
			<div class="container">
				<h4>üêù Abeja</h4>
				<p>Contenido de la secci√≥n abeja.</p>
			</div>
		</div>

		<div id="image-test3" class="tab-content">
			<div class="container">
				<h4>üç™ Cookie</h4>
				<p>Contenido de la secci√≥n cookie.</p>
			</div>
		</div>

		<div id="image-test4" class="tab-content">
			<div class="container">
				<h4>üåä Tsunami</h4>
				<p>Contenido de la secci√≥n tsunami.</p>
			</div>
		</div>


		<div id="image-test6" class="tab-content">
			<div class="container">
				<h4>üíé Diamante</h4>
				<p>Contenido de la secci√≥n diamante.</p>
			</div>
		</div>

		<div id="cat-facts" class="tab-content">
			<div class="container">
				<h4>üê± Cat Facts - Curiosidades Felinas</h4>

				<!-- Controles para la API -->
				<div class="row">
					<div class="col s12 m4">
						<div class="input-field">
							<select id="fact-count">
								<option value="1" selected>1 hecho</option>
								<option value="2">2 hechos</option>
								<option value="3">3 hechos</option>
								<option value="5">5 hechos</option>
							</select>
						</div>
					</div>
					<div class="col s12 m4">
						<div class="input-field">
							<select id="fact-language">
								<option value="esp" selected>Espa√±ol</option>
								<option value="eng-us">English</option>
								<option value="por-br">Portugu√™s</option>
								<option value="rus-ru">–†—É—Å—Å–∫–∏–π</option>
								<option value="ita-it">Italiano</option>
								<option value="ger-de">Deutsch</option>
								<option value="ukr-ua">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
								<option value="kor-ko">ÌïúÍµ≠Ïñ¥</option>
							</select>
						</div>
					</div>
					<div class="col s12 m4">
						<div class="input-field">
							<input type="number" id="fact-id" placeholder="Opcional" min="1">
							<label>ID espec√≠fico del hecho</label>
						</div>
					</div>
				</div>

				<!-- Botones de acci√≥n -->
				<div class="center-align" style="margin: 20px 0;">
					<a id="load-cat-facts-btn" class="waves-effect waves-light btn orange darken-3">
						<i class="material-icons left">pets</i>
						Cargar Hechos de Gatos
					</a>
					<a id="random-fact-btn" class="waves-effect waves-light btn teal lighten-2" style="margin-left: 10px;">
						<i class="material-icons left">shuffle</i>
						Hecho Aleatorio
					</a>
				</div>

				<!-- Indicador de carga -->
				<div id="cat-loading-indicator" class="loading-panel" style="display:none;">
					<p>üê± Buscando curiosidades felinas...</p>
				</div>

				<!-- Contenedor de hechos -->
				<div class="row" id="cat-facts-container"></div>
			</div>
		</div>

		<!-- Sidenav lateral -->
		<ul id="slide-out" class="sidenav">
			<li>
				<div class="user-view">
					<div class="background">
						<img src="img/fondorosi.png" alt="Background" />
					</div>
					<a href="#user"><img class="circle" src="img/gato.png" alt="User" /></a>
					<a href="#name"><span class="black-text name">Valeria Santana</span></a>
					<a href="#email"><span class="black-text email">vsanta@example.com</span></a>
				</div>
			</li>
			<li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
			<li><a href="#!">Second Link</a></li>
			<li>
				<div class="divider"></div>
			</li>
			<li><a class="subheader">Subheader</a></li>
			<li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
		</ul>


		<script src="cordova.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="materialize-v2.2.2/js/materialize.min.js"></script>
		<script src="js/index.js"></script>

		<script>
			// Inicializar componentes de Materialize
            document.addEventListener('DOMContentLoaded', function () {
                // Inicializar sidenav
                var elems = document.querySelectorAll('.sidenav');
                M.Sidenav.init(elems);

                // Inicializar tabs
                var tabs = document.querySelectorAll('.tabs');
                M.Tabs.init(tabs);

                // Gesti√≥n manual de tabs
                document.querySelectorAll('.tab a').forEach(function (tab) {
                    tab.addEventListener('click', function (e) {
                        e.preventDefault();
                        document.querySelectorAll('.tab-content').forEach(function (content) {
                            content.classList.remove('active');
                        });
                        var targetId = this.getAttribute('href');
                        var targetContent = document.querySelector(targetId);
                        if (targetContent) targetContent.classList.add('active');
                    });
                });

                // Inicializar modal
                var modals = document.querySelectorAll('.modal');
                M.Modal.init(modals);

                // Inicializar selectores de Materialize para cat facts
                var catSelects = document.querySelectorAll('#cat-facts select');
                M.FormSelect.init(catSelects);

                // Asociar botones para cat facts
                document.getElementById('load-cat-facts-btn').addEventListener('click', function() {
                    loadCatFacts();
                });

                document.getElementById('random-fact-btn').addEventListener('click', function() {
                    loadRandomCatFact();
                });
            });

			// *******************************************************************
			//            FUNCIONES AJAX PARA HECHOS DE GATOS
			// *******************************************************************

			function loadCatFacts() {
				const factsContainer = $('#cat-facts-container');
				const loadingIndicator = $('#cat-loading-indicator');
				const count = $('#fact-count').val();
				const language = $('#fact-language').val();
				const specificId = $('#fact-id').val();

				let apiUrl = 'https://meowfacts.herokuapp.com/';

				// Construir URL con par√°metros
				const params = new URLSearchParams();
				if (count && count > 1) {
					params.append('count', count);
				}
				if (language && language !== 'eng-us') {
					params.append('lang', language);
				}
				if (specificId && specificId.trim() !== '') {
					params.append('id', specificId.trim());
				}

				if (params.toString()) {
					apiUrl += '?' + params.toString();
				}

				loadingIndicator.show();
				factsContainer.empty();

				$.ajax({
					url: apiUrl,
					method: 'GET',
					dataType: 'json',
					success: function (data) {
						loadingIndicator.hide();

						if (data && data.data && data.data.length > 0) {
							let factsHtml = '';
							data.data.forEach(function (fact, index) {
								const factNumber = specificId ? specificId : (index + 1);
								factsHtml += `
									<div class="col s12 m6 l4">
										<div class="cat-fact-card card hoverable">
											<div class="card-content">
												<div class="card-title">
													<i class="material-icons left">pets</i>
													Hecho #${factNumber}
												</div>
												<p class="cat-fact-text">${fact}</p>
											</div>
											<div class="card-action">
												<a class="btn-floating btn-small waves-effect waves-light orange lighten-2 share-btn"
												   onclick="shareFact('${fact.replace(/'/g, "\\'")}')">
													<i class="material-icons">share</i>
												</a>
											</div>
										</div>
									</div>
								`;
							});
							factsContainer.html(factsHtml);
						} else {
							factsContainer.html(`
								<div class="col s12">
									<div class="card-panel center-align">
										<i class="material-icons large">sentiment_dissatisfied</i>
										<p>No se encontraron hechos de gatos.</p>
									</div>
								</div>
							`);
						}
					},
					error: function (xhr, status, error) {
						loadingIndicator.hide();
						factsContainer.html(`
							<div class="col s12">
								<div class="error-panel">
									‚ùå Error al cargar los hechos: ${error} (${status})
									<br><small>URL: ${apiUrl}</small>
								</div>
							</div>
						`);
					}
				});
			}

			function loadRandomCatFact() {
				// Limpiar ID espec√≠fico para obtener un hecho aleatorio
				$('#fact-id').val('');
				$('#fact-count').val('1');
				$('#fact-count').formSelect();

				loadCatFacts();
			}

			function shareFact(fact) {
				if (navigator.share) {
					navigator.share({
						title: 'Hecho curioso sobre gatos',
						text: fact,
						url: window.location.href
					});
				} else {
					// Fallback: copiar al portapapeles
					navigator.clipboard.writeText(fact).then(function() {
						M.toast({html: '¬°Hecho copiado al portapapeles!', classes: 'green'});
					}).catch(function() {
						M.toast({html: 'Hecho: ' + fact, classes: 'orange'});
					});
				}
			}

		</script>

	</body>
</html>